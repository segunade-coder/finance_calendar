import{C as De,r as u,P as Ee,u as V,O as Pe,D as te,c as ie,m as Y,M as Te,k as Ne,l as Ce,j as o,B as ne,s as oe,I as ke,n as Oe,g as Le,b as le}from"./index-9b3e82f7.js";import{I as Ae,D as ue}from"./inputtextarea.esm-fe1d180e.js";import{C as Ie,M as Me}from"./multiselect.esm-6a74c009.js";import{R as Re}from"./rating.esm-0fc3bd2e.js";function z(t){"@babel/helpers - typeof";return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},z(t)}function _e(t,r){if(z(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var e=s.call(t,r||"default");if(z(e)!=="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function He(t){var r=_e(t,"string");return z(r)==="symbol"?r:String(r)}function Be(t,r,s){return r=He(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function re(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,e=new Array(r);s<r;s++)e[s]=t[s];return e}function Ue(t){if(Array.isArray(t))return re(t)}function We(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function de(t,r){if(t){if(typeof t=="string")return re(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return re(t,r)}}function ze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fe(t){return Ue(t)||We(t)||de(t)||ze()}function Ke(t){if(Array.isArray(t))return t}function Ve(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var e,v,p,h,g=[],y=!0,j=!1;try{if(p=(s=s.call(t)).next,r===0){if(Object(s)!==s)return;y=!1}else for(;!(y=(e=p.call(s)).done)&&(g.push(e.value),g.length!==r);y=!0);}catch(w){j=!0,v=w}finally{try{if(!y&&s.return!=null&&(h=s.return(),Object(h)!==h))return}finally{if(j)throw v}}return g}}function Ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X(t,r){return Ke(t)||Ve(t,r)||de(t,r)||Ye()}var J=De.extend({defaultProps:{__TYPE:"Slider",id:null,value:null,min:0,max:100,orientation:"horizontal",step:null,range:!1,style:null,className:null,disabled:!1,tabIndex:0,onChange:null,onSlideEnd:null,children:void 0}});function ce(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(v){return Object.getOwnPropertyDescriptor(t,v).enumerable})),s.push.apply(s,e)}return s}function Xe(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?ce(Object(s),!0).forEach(function(e){Be(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ce(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var me=u.memo(u.forwardRef(function(t,r){var s=u.useContext(Ee),e=J.getProps(t,s),v=u.useRef(null),p=u.useRef(0),h=u.useRef(!1),g=u.useRef(!1),y=u.useRef(0),j=u.useRef(0),w=u.useRef(0),D=u.useRef(0),m=e.range?e.value||[e.min,e.max]:e.value||0,S=e.orientation==="horizontal",$=e.orientation==="vertical",A=V({type:"mousemove",listener:function(n){return U(n)}}),C=X(A,2),I=C[0],M=C[1],k=V({type:"mouseup",listener:function(n){return W(n)}}),R=X(k,2),G=R[0],F=R[1],K=V({type:"touchmove",listener:function(n){return U(n)}}),_=X(K,2),q=_[0],Q=_[1],Z=V({type:"touchend",listener:function(n){return W(n)}}),a=X(Z,2),x=a[0],E=a[1],O=J.setMetaData({props:e}),P=O.ptm,H=function(n,l){var i=e.range?m[p.current]:m,d=(e.step||1)*l;se(n,i+d),n.preventDefault()},B=function(n,l){e.disabled||(g.current=!0,ae(),h.current=!0,p.current=l)},U=function(n){g.current&&(ee(n),n.preventDefault())},W=function(n){if(g.current){g.current=!1;var l=ee(n);e.onSlideEnd&&e.onSlideEnd({originalEvent:n,value:l}),M(),F(),Q(),E()}},pe=function(n,l){I(),G(),B(n,l)},fe=function(n,l){q(),x(),B(n,l)},ve=function(n,l){if(!e.disabled){p.current=l;var i=n.key;i==="ArrowRight"||i==="ArrowUp"?H(n,1):(i==="ArrowLeft"||i==="ArrowDown")&&H(n,-1)}},ge=function(n){if(!e.disabled){if(!h.current){ae();var l=ee(n);e.onSlideEnd&&e.onSlideEnd({originalEvent:n,value:l})}h.current=!1}},ae=function(){var n=v.current.getBoundingClientRect();y.current=n.left+te.getWindowScrollLeft(),j.current=n.top+te.getWindowScrollTop(),w.current=v.current.offsetWidth,D.current=v.current.offsetHeight},ee=function(n){var l,i=n.touches?n.touches[0].pageX:n.pageX,d=n.touches?n.touches[0].pageY:n.pageY;S?l=(i-y.current)*100/w.current:l=(j.current+D.current-d)*100/D.current;var f=(e.max-e.min)*(l/100)+e.min;if(e.step){var b=e.range?m[p.current]:m,T=f-b;T<0?f=b+Math.ceil(f/e.step-b/e.step)*e.step:T>0&&(f=b+Math.floor(f/e.step-b/e.step)*e.step)}else f=Math.floor(f);return se(n,f)},se=function(n,l){var i=parseFloat(l.toFixed(10)),d=i;return e.range?(p.current===0?i<e.min?i=e.min:i>e.max&&(i=e.max):i>e.max?i=e.max:i<e.min&&(i=e.min),d=Fe(m),d[p.current]=i,e.onChange&&e.onChange({originalEvent:n,value:d})):(i<e.min?i=e.min:i>e.max&&(i=e.max),d=i,e.onChange&&e.onChange({originalEvent:n,value:d})),d},L=function(n,l,i){var d={transition:g.current?"none":null,left:n!==null&&n+"%",bottom:l&&l+"%"},f=ie("p-slider-handle",{"p-slider-handle-start":i===0,"p-slider-handle-end":i===1,"p-slider-handle-active":p.current===i}),b=Y(Xe({className:f,style:d,tabIndex:e.tabIndex,role:"slider",onMouseDown:function(N){return pe(N,i)},onTouchStart:function(N){return fe(N,i)},onKeyDown:function(N){return ve(N,i)},"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":n||l,"aria-orientation":e.orientation},Se),P("handle"));return u.createElement("span",b)},he=function(){var n=(m[0]<e.min?e.min:m[0]-e.min)*100/(e.max-e.min),l=(m[1]>e.max?e.max:m[1]-e.min)*100/(e.max-e.min),i=S?L(n,null,0):L(null,n,0),d=S?L(l,null,1):L(null,l,1),f=l>n?l-n:n-l,b=l>n?n:l,T=S?{left:b+"%",width:f+"%"}:{bottom:b+"%",height:f+"%"},N=Y({className:"p-slider-range",style:T},P("range"));return u.createElement(u.Fragment,null,u.createElement("span",N),i,d)},ye=function(){var n;m<e.min?n=e.min:m>e.max?n=e.max:n=(m-e.min)*100/(e.max-e.min);var l=S?{width:n+"%"}:{height:n+"%"},i=S?L(n,null,null):L(null,n,null),d=Y({className:"p-slider-range",style:l},P("range"));return u.createElement(u.Fragment,null,u.createElement("span",d),i)};u.useImperativeHandle(r,function(){return{props:e,getElement:function(){return v.current}}});var be=J.getOtherProps(e),Se=Pe.reduceKeys(be,te.ARIA_PROPS),xe=ie("p-slider p-component",e.className,{"p-disabled":e.disabled,"p-slider-horizontal":S,"p-slider-vertical":$}),je=e.range?he():ye(),we=Y({ref:v,id:e.id,style:e.style,className:xe,onClick:ge},J.getOtherProps(e),P("root"));return u.createElement("div",we,je)}));me.displayName="Slider";const Qe=()=>{const t=u.useRef(null),{io:r}=u.useContext(Te),s=Ne(),[e,v]=u.useState([]),[p,h]=u.useState(""),[g,y]=u.useState(""),[j,w]=u.useState(""),[D,m]=u.useState([]),[S,$]=u.useState([]),[A,C]=u.useState(0),[I,M]=u.useState(0),[k,R]=u.useState(""),[G,F]=u.useState(!0);t.current=Ce().id,u.useEffect(()=>{F(!0),console.log(t.current),r.emit("get-people"),r.on("set-people",({data:a})=>{$(a)}),r.emit("get-task",t.current),r.on("set-task",({data:a})=>{var x,E,O,P,H,B,U,W;v(a),h((x=a[0])==null?void 0:x.task),y(K((E=a[0])==null?void 0:E.status)),w(K((O=a[0])==null?void 0:O.status)),w((P=a[0])==null?void 0:P.status),C((H=a[0])==null?void 0:H.progress),m(JSON.parse((B=a[0])==null?void 0:B.assignTo)),M((U=a[0])==null?void 0:U.priority),R(new Date((W=a[0])==null?void 0:W.deadline)),F(!1)})},[t.current]);const K=a=>{switch(a=Number(a),a){case 0:return"Pending";case 1:return"Stuck";case 2:return"Done";case 3:return"Working on";default:return"Pending"}},_=a=>{switch(a){case"Pending":return 0;case"Stuck":return 1;case"Done":return 2;case"Working on":return 3;default:return 0}},q=a=>{const x=new Intl.ListFormat("en-GB",{style:"narrow",type:"conjunction"});return o.jsxs("div",{children:[o.jsx("p",{style:{margin:0,textTransform:"capitalize"},children:a.name}),o.jsx("small",{className:"p-card-subtitle",style:{margin:0,textTransform:"capitalize"},children:x.format(JSON.parse(a.role))})]})},Q=a=>{var E;a.preventDefault();const x=Le([{task:p},{deadline:k},{"Assign to":D}]);x.length>0?le.error(x[0],{id:"update"}):r.volatile.emit("update-task",{id:(E=e[0])==null?void 0:E.id,task:p,assignTo:D,priority:I,status:_(g),deadline:k,progress:A},O=>{O.status&&le.success("Update completed",{id:"update"})})},Z=a=>{y(a),w(_(a))};return o.jsxs("aside",{className:"__s-event",children:[o.jsx("div",{children:o.jsxs("div",{className:"heading",children:[o.jsx(ne,{icon:"pi pi-times",onClick:()=>s("../"),className:"no-shadow p-button-rounded",style:{marginLeft:"-0.8rem"},text:!0}),o.jsx("p",{children:"Edit Task"})]})}),G?o.jsx("div",{className:"fallback-loading",children:"Loading..."}):e.length>0?o.jsx("div",{className:"s-event-cont",children:o.jsxs("div",{className:"p-card-body",style:{padding:"0.5rem 0.5rem"},children:[o.jsx("div",{children:o.jsx(Ae,{value:p,onChange:a=>h(a.target.value)})}),o.jsx("small",{children:"Status"}),o.jsxs("div",{className:"flex no-wrap p-card-body",children:[o.jsx(ne,{severity:oe(j).color,label:oe(j).text,size:"small",className:"no-shadow",style:{flexBasis:"100%"}}),o.jsx(ue,{value:g,onChange:a=>Z(a.value),options:["Pending","Working on","Done","Stuck"]})]}),o.jsx("small",{children:"Progress"}),o.jsxs("div",{className:"slider",children:[o.jsx(me,{value:A,onChange:a=>C(a.value)}),o.jsx(ke,{value:A,onChange:a=>C(a.target.value),keyfilter:"pnum"})]}),o.jsx("small",{children:"Deadline "}),o.jsxs("div",{className:"deadline",children:[o.jsx("span",{className:"date",children:Oe(k)}),o.jsx(Ie,{value:k,onChange:a=>R(a.value),showButtonBar:!0,showIcon:!0})]}),o.jsx("small",{children:"Assign To"}),o.jsx("div",{className:"p-people ",children:o.jsx(Me,{id:"role",value:D,onChange:a=>m(a.value),options:S,optionLabel:"name",optionValue:"name",itemTemplate:q,display:"chip"})}),o.jsx("small",{children:"Priority"}),o.jsxs("div",{className:"priority flex no-wrap",children:[o.jsx(Re,{value:I,cancel:!1,onChange:a=>M(a.value)}),o.jsx(ue,{value:I,onChange:a=>M(a.value),options:[{label:"Very Important",value:5},{label:"Very High",value:4},{label:"High",value:3},{label:"Moderate",value:2},{label:"Low",value:1}],optionLabel:"label",optionValue:"value"})]}),o.jsx(ne,{label:"Update",icon:"pi pi-check-circle",severity:"success",className:"w-100",style:{marginTop:".8rem"},onClick:a=>Q(a)})]})}):o.jsx("div",{className:"fallback-loading",children:"Nothing here"})]})};export{Qe as default};
