import{C as ee,r as l,P as ae,c as H,m as N,M as ge,j as e,L as X,a as be}from"./index-82ae9a98.js";import{B as c,T as je,I as E}from"./index.esm-6519f0fc.js";import{D as L}from"./dialog.esm-c994e1f7.js";import{D as q}from"./index.esm-3999b91b.js";import{M as K}from"./multiselect.esm-23fcf49a.js";import{A as O}from"./avatar.esm-8b90b2bb.js";import{R as Ne,C as Q}from"./rating.esm-ad86b7c7.js";import{C as ye,c as Z}from"./confirmdialog.esm-6c8d2608.js";var z=ee.extend({defaultProps:{__TYPE:"AvatarGroup",style:null,className:null,children:void 0}}),se=l.forwardRef(function(o,h){var f=l.useContext(ae),s=z.getProps(o,f),u=z.setMetaData({props:s}),i=u.ptm,n=l.useRef(null),x=H("p-avatar-group p-component",s.className);l.useImperativeHandle(h,function(){return{props:s,getElement:function(){return n.current}}});var y=N({ref:n,style:s.style,className:x},z.getOtherProps(s),i("root"));return l.createElement("div",y,s.children)});se.displayName="AvatarGroup";var M=ee.extend({defaultProps:{__TYPE:"ProgressBar",id:null,value:null,showValue:!0,unit:"%",style:null,className:null,mode:"determinate",displayValueTemplate:null,color:null,children:void 0}}),le=l.memo(l.forwardRef(function(o,h){var f=l.useContext(ae),s=M.getProps(o,f),u=M.setMetaData({props:s}),i=u.ptm,n=l.useRef(null),x=function(){if(s.showValue&&s.value!=null){var d=s.displayValueTemplate?s.displayValueTemplate(s.value):s.value+s.unit;return d}return null},y=function(){var d=H("p-progressbar p-component p-progressbar-determinate",s.className),T=x(),v=N({id:s.id,ref:n,className:d,style:s.style,role:"progressbar","aria-valuemin":"0","aria-valuenow":s.value,"aria-valuemax":"100"},M.getOtherProps(s),i("root")),g=N({className:"p-progressbar-value p-progressbar-value-animate",style:{width:s.value+"%",display:"flex",backgroundColor:s.color}},i("value")),b=N({className:"p-progressbar-label"},i("label"));return l.createElement("div",v,l.createElement("div",g,s.value!=null&&s.value!==0&&s.showValue&&l.createElement("div",b,T)))},C=function(){var d=H("p-progressbar p-component p-progressbar-indeterminate",s.className),T=N({id:s.id,ref:n,className:d,style:s.style,role:"progressbar"},M.getOtherProps(s),i("root")),v=N({className:"p-progressbar-indeterminate-container"},i("indeterminateContainer")),g=N({className:"p-progressbar-value p-progressbar-value-animate",style:{backgroundColor:s.color}},i("value"));return l.createElement("div",T,l.createElement("div",v,l.createElement("div",g)))};if(l.useImperativeHandle(h,function(){return{props:s,getElement:function(){return n.current}}}),s.mode==="determinate")return y();if(s.mode==="indeterminate")return C();throw new Error(s.mode+" is not a valid mode for the ProgressBar. Valid values are 'determinate' and 'indeterminate'")}));le.displayName="ProgressBar";const Se=()=>{let{io:o}=l.useContext(ge);l.useRef(null),l.useRef(null);const[h,f]=l.useState(!1),[s,u]=l.useState(!1),[i,n]=l.useState(!1),[x,y]=l.useState(""),[C,k]=l.useState(""),[d,T]=l.useState(!1),[v,g]=l.useState(""),[b,R]=l.useState(null),[D,B]=l.useState(1),[P,V]=l.useState(""),[te,_]=l.useState(!1),[re,G]=l.useState(!1),[A,J]=l.useState([]),[j,U]=l.useState([]),oe=[["#DD571C","#ffffff"],["#4caf4f","#ffffff"],["#9c27b0","#ffffff"],["#126180","#FFFFFF"],["#eab308","#ffffff"],["#3A5311","#ffffff"],["#2196f3","#ffffff"],["#4B5320","#ffffff"],["#7A3803","#ffffff"],["#E34A27","#FFFFFF"],["#028A0F","#ffffff"],["#48AAAD","#ffffff"],["#241571","#FFFFFF"]],S=[["#2196f3","#ffffff"],["#7A3803","#ffffff"],["#9c27b0","#ffffff"],["#4caf4f","#ffffff"],["#E34A27","#FFFFFF"],["#028A0F","#ffffff"],["#eab308","#ffffff"],["#990F02","#ffffff"],["#4B5320","#ffffff"],["#DD571C","#ffffff"],["#3A5311","#ffffff"],["#3944BC","#ffffff"]];l.useEffect(()=>{_(!0),G(!0),o.emit("get-people"),o.emit("get-tasks"),o.on("set-people",({data:a})=>{U(a),_(!1)}),o.on("set-tasks",({data:a})=>{J(a),G(!1)})},[o]);const ne=e.jsxs("div",{children:[e.jsx(c,{label:"Cancel",icon:"pi pi-times",onClick:()=>f(!1),className:"p-button-text",size:"small"}),e.jsx(c,{label:"Add",icon:"pi pi-check-circle",onClick:()=>de(),autoFocus:!0,size:"small",loading:d})]}),ie=e.jsxs("div",{children:[e.jsx(c,{label:"Cancel",icon:"pi pi-times",onClick:()=>u(!1),className:"p-button-text",size:"small"}),e.jsx(c,{label:"Add",icon:"pi pi-check-circle",onClick:()=>Y(),autoFocus:!0,size:"small",loading:d})]}),ce=e.jsxs("div",{children:[e.jsx(c,{label:"Cancel",icon:"pi pi-times",onClick:()=>n(!1),className:"p-button-text",size:"small"}),e.jsx(c,{label:"Add",autoFocus:!0,icon:"pi pi-check-circle",onClick:()=>Y(),size:"small",loading:d})]}),de=()=>{x!==""&&C!==""&&(o.emit("add-person",{name:x,role:C}),f(!1),y(""),k(""))},w=(a,t=!1)=>{let r=a;return r=r>=S.length?0:a,t?oe[r]:S[r]},pe=a=>{let t=j.find(r=>r.name.toLowerCase().trim()===a.toLowerCase().trim());V([t.name]),n(!0),console.log(P)},me=a=>{U(j.filter(t=>t.id!==a)),o.emit("delete-person",{id:a})},$=new Intl.ListFormat("en-GB",{style:"narrow",type:"conjunction"}),fe=a=>$.format(JSON.parse(a)),ue=a=>{let t=JSON.parse(a.role);return e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,textTransform:"capitalize"},children:a.name}),e.jsx("small",{className:"p-card-subtitle",style:{margin:0,textTransform:"capitalize"},children:$.format(t)})]})},Y=()=>{u(!1),v!==""&&b!==""&&b!==null&&P!==""&&D!==""&&(o.emit("add-task",{task:v,deadline:b,assignTo:P,status:0,priority:D,progress:0}),n(!1),V(""),g(""),R(""),B(1))},W=a=>{switch(a=Number(a),a){case 0:return{text:"Pending",color:"secondary"};case 1:return{text:"Stuck",color:"danger"};case 2:return{text:"Done",color:"success"};case 3:return{text:"Working on",color:"warning"};default:return{text:"Pending",color:"secondary"}}},ve=a=>{J(A.filter(t=>t.id!==a)),o.emit("delete-task",{id:a})},I=a=>{let t=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"});const r=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];let F=(a-new Date)/1e3;for(let p=0;p<r.length;p++){const m=r[p];if(Math.abs(F)<m.amount)return t.format(Math.round(F),m.name);F/=m.amount}},he=a=>{Z({message:"Do you want to delete this task?",header:"Delete Confirmation",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",accept:()=>ve(a),reject:()=>{}})},xe=a=>{Z({message:"Do you want to delete this person?",header:"Delete Confirmation",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",accept:()=>me(a),reject:()=>{}})};return e.jsxs("div",{className:"__events",children:[e.jsx(ye,{}),e.jsxs("div",{className:"people",children:[e.jsx("p",{className:"p-card-subtitle mb-1",style:{color:"#6a6a6a"},children:"People"}),e.jsx(c,{label:"",icon:h?"pi pi-minus":"pi pi-plus",severity:"help",onClick:()=>f(!h),style:{marginBottom:"1rem"}}),e.jsx("div",{className:"people-card",children:te?e.jsx("div",{children:"loading.."}):j.length>0?j.map((a,t)=>e.jsxs("div",{className:"peep p-card",children:[e.jsxs("div",{className:"content p-card-body",children:[e.jsx(O,{label:a.name[0].toUpperCase(),size:"large",shape:"circle",style:{backgroundColor:w(t)[0],color:w(t)[1]}}),e.jsxs("div",{className:"details p-card-content",children:[e.jsx("p",{className:"m-0",children:e.jsx(X,{to:`person/${a.name.toLowerCase().replace(/ /g,"-")}`,state:{person:j.filter(r=>r.id===a.id)},children:a.name})}),e.jsx("small",{className:"m-0 p-card-subtitle",children:fe(a.role)})]}),e.jsx("div",{className:"p-card-foote",children:e.jsx(c,{icon:"pi pi-plus",text:!0,size:"small",className:"p-button-outlined no-shadow",severity:"help",onClick:()=>pe(a.name)})})]}),e.jsx("div",{className:"p-card-footer cf",children:e.jsx("i",{className:"pi pi-fw pi-trash",style:{color:"#EF4444"},onClick:()=>xe(a.id)})})]},a.name+Math.random())):e.jsx("div",{style:{color:"#7a7a7a",marginTop:"0.5rem"},children:"No People"})})]}),e.jsxs("div",{className:"tasks",children:[e.jsx("p",{className:"p-card-subtitle mb-1",style:{color:"#6a6a6a"},children:"Tasks"}),e.jsx(c,{label:"",icon:s?"pi pi-minus":"pi pi-plus",severity:"secondary",onClick:()=>u(!s)}),e.jsx("div",{className:"tasks-card",children:re?e.jsx("div",{children:"loading.."}):A.length>0?A.map((a,t)=>{var r,F;return e.jsx("div",{className:"p-card",children:e.jsxs("div",{className:"p-card-body tasks-body",children:[e.jsx("div",{className:"p-card-heading task-content",children:e.jsx(X,{to:`event/${a.id}`,state:{event:A.filter(p=>p.id===a.id),people:j},children:a.task})}),e.jsx("div",{className:"avatar-group",children:e.jsxs(se,{children:[a.assignTo&&JSON.parse(a.assignTo).map((p,m)=>m<2&&e.jsx(O,{shape:"circle",size:"normal",label:p[0].toUpperCase()+"  ",style:{backgroundColor:w(m===0?Math.floor(Math.random()*S.length):m,!0)[0],color:w(m===0?Math.floor(Math.random()*S.length):m,!0)[1]},title:p[0].toUpperCase()},p)),JSON.parse(a.assignTo).length>2&&e.jsx(O,{shape:"circle",size:"normal",label:JSON.parse(a.assignTo).length-2+"+",style:{backgroundColor:w(t)[0],color:w(t)[1]}})]})}),e.jsx("div",{className:"status",children:e.jsx(c,{severity:W(a.status).color,label:W(a.status).text,size:"small",className:"no-shadow"})}),e.jsxs("div",{className:"deadline",children:[e.jsx(je,{target:".custom-target-icon"}),e.jsx("i",{className:"custom-target-icon pi pi-calendar p-text-secondary p-overlay-badge","data-pr-tooltip":a.deadline!==""&&((r=I(new Date(a.deadline)))!=null&&r.includes("ago"))?"expired "+I(new Date(a.deadline)):"expires "+I(new Date(a.deadline)),"data-pr-position":"right","data-pr-at":"right+5 top","data-pr-my":"left center-2",style:{cursor:"pointer",color:(F=I(new Date(a.deadline)))!=null&&F.includes("ago")?"red":"green"}})]}),e.jsx("div",{className:"rating",children:e.jsx(Ne,{value:a.priority,cancel:!1,readOnly:!0})}),e.jsx("div",{className:"progress",children:e.jsx(le,{value:a.progress})}),e.jsx("div",{children:e.jsx("i",{className:"pi pi-fw pi-trash",style:{color:"#EF4444"},onClick:()=>he(a.id)})})]})},a.id)}):e.jsx("div",{style:{color:"#7a7a7a",marginTop:"0.5rem"},children:"No Tasks"})})]}),e.jsx(L,{header:"Add People",visible:h,onHide:()=>f(!1),style:{width:"30vw"},footer:ne,breakpoints:{"960px":"75vw","641px":"100vw"},children:e.jsxs("div",{className:"event-card",children:[e.jsxs("span",{className:"p-float-label",children:[e.jsx(E,{id:"name",value:x,onChange:a=>y(a.target.value)}),e.jsx("label",{htmlFor:"desc",children:"Name"})]}),e.jsxs("span",{className:"p-float-label",children:[e.jsx(K,{id:"role",value:C,onChange:a=>k(a.value),options:["Frontend Developer","Backend Developer","Marketer","CEO","Project Designer","UI/UX Designer","Supervisor"],display:"chip"}),e.jsx("label",{htmlFor:"desc",children:"Role"})]})]})}),e.jsx(L,{header:"Assign Task",visible:s,onHide:()=>u(!1),style:{width:"30vw"},footer:ie,breakpoints:{"960px":"75vw","641px":"100vw"},children:e.jsxs("div",{className:"event-card",children:[e.jsxs("span",{className:"p-float-label",children:[e.jsx(E,{id:"task",value:v,onChange:a=>g(a.target.value)}),e.jsx("label",{htmlFor:"desc",children:"Task"})]}),e.jsxs("span",{className:"p-float-label",children:[e.jsx(K,{id:"role",value:P,onChange:a=>V(a.value),options:j,optionLabel:"name",optionValue:"name",itemTemplate:ue,display:"chip"}),e.jsx("label",{htmlFor:"desc",children:"Assign To"})]}),e.jsxs("span",{className:"p-float-label",children:[e.jsx(Q,{id:"deadline",value:b,onChange:a=>R(a.value),showIcon:!0,selectionMode:"range",readOnlyInput:!0}),e.jsx("label",{htmlFor:"deadline",children:"Select Date Range"})]}),e.jsxs("span",{className:"p-float-label",children:[e.jsx(q,{value:D,onChange:a=>B(a.value),options:[{label:"Very Important",value:5},{label:"Very High",value:4},{label:"High",value:3},{label:"Moderate",value:2},{label:"Low",value:1}],optionLabel:"label",optionValue:"value"}),e.jsx("label",{htmlFor:"deadline",children:"Priority"})]})]})}),e.jsx(L,{header:"Assign Task",visible:i,onHide:()=>n(!1),style:{width:"30vw"},footer:ce,breakpoints:{"960px":"75vw","641px":"100vw"},children:e.jsxs("div",{className:"event-card",children:[e.jsxs("span",{className:"p-float-label",children:[e.jsx(E,{id:"task",value:v,onChange:a=>g(a.target.value)}),e.jsx("label",{htmlFor:"desc",children:"Task"})]}),e.jsxs("span",{className:"p-float-label",children:[e.jsx(E,{value:P[0],readOnly:!0}),e.jsx("label",{htmlFor:"desc",children:"Assign To"})]}),e.jsxs("span",{className:"p-float-label",children:[e.jsx(Q,{id:"deadline",value:b,onChange:a=>R(a.value),showIcon:!0,selectionMode:"range",readOnlyInput:!0}),e.jsx("label",{htmlFor:"deadline",children:"Select Date Range"})]}),e.jsx(q,{value:D,onChange:a=>B(a.value),options:[{label:"Very Important",value:5},{label:"Very High",value:4},{label:"High",value:3},{label:"Moderate",value:2},{label:"Low",value:1}],optionLabel:"label",optionValue:"value"})]})}),e.jsx(be,{})]})};export{Se as default};
