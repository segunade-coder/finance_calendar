import{C as Se,r as u,P as je,u as oe,O as De,D as fe,c as ge,m as ie,b as Pe,M as Ee,d as Ne,j as i}from"./index-82ae9a98.js";import{B as ve,I as Te}from"./index.esm-6519f0fc.js";import{D as ye}from"./index.esm-3999b91b.js";import{M as Oe}from"./multiselect.esm-23fcf49a.js";import{C as Ie,R as Ce}from"./rating.esm-ad86b7c7.js";function z(r){"@babel/helpers - typeof";return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},z(r)}function Me(r,n){if(z(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var e=a.call(r,n||"default");if(z(e)!=="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function Le(r){var n=Me(r,"string");return z(n)==="symbol"?n:String(n)}function Ae(r,n,a){return n=Le(n),n in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r}function he(r,n){(n==null||n>r.length)&&(n=r.length);for(var a=0,e=new Array(n);a<n;a++)e[a]=r[a];return e}function _e(r){if(Array.isArray(r))return he(r)}function ke(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function xe(r,n){if(r){if(typeof r=="string")return he(r,n);var a=Object.prototype.toString.call(r).slice(8,-1);if(a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set")return Array.from(r);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return he(r,n)}}function Re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Be(r){return _e(r)||ke(r)||xe(r)||Re()}function He(r){if(Array.isArray(r))return r}function We(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var e,h,f,w,g=[],y=!0,D=!1;try{if(f=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;y=!1}else for(;!(y=(e=f.call(a)).done)&&(g.push(e.value),g.length!==n);y=!0);}catch(N){D=!0,h=N}finally{try{if(!y&&a.return!=null&&(w=a.return(),Object(w)!==w))return}finally{if(D)throw h}}return g}}function Fe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(r,n){return He(r)||We(r,n)||xe(r,n)||Fe()}var ue=Se.extend({defaultProps:{__TYPE:"Slider",id:null,value:null,min:0,max:100,orientation:"horizontal",step:null,range:!1,style:null,className:null,disabled:!1,tabIndex:0,onChange:null,onSlideEnd:null,children:void 0}});function be(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);n&&(e=e.filter(function(h){return Object.getOwnPropertyDescriptor(r,h).enumerable})),a.push.apply(a,e)}return a}function Ue(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?be(Object(a),!0).forEach(function(e){Ae(r,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}var we=u.memo(u.forwardRef(function(r,n){var a=u.useContext(je),e=ue.getProps(r,a),h=u.useRef(null),f=u.useRef(0),w=u.useRef(!1),g=u.useRef(!1),y=u.useRef(0),D=u.useRef(0),N=u.useRef(0),A=u.useRef(0),p=e.range?e.value||[e.min,e.max]:e.value||0,b=e.orientation==="horizontal",_=e.orientation==="vertical",k=oe({type:"mousemove",listener:function(t){return W(t)}}),C=le(k,2),M=C[0],K=C[1],Y=oe({type:"mouseup",listener:function(t){return F(t)}}),R=le(Y,2),X=R[0],ce=R[1],de=oe({type:"touchmove",listener:function(t){return W(t)}}),G=le(de,2),me=G[0],pe=G[1],l=oe({type:"touchend",listener:function(t){return F(t)}}),c=le(l,2),T=c[0],P=c[1],E=ue.setMetaData({props:e}),x=E.ptm,B=function(t,s){var o=e.range?p[f.current]:p,m=(e.step||1)*s;V(t,o+m),t.preventDefault()},H=function(t,s){e.disabled||(g.current=!0,U(),w.current=!0,f.current=s)},W=function(t){g.current&&(L(t),t.preventDefault())},F=function(t){if(g.current){g.current=!1;var s=L(t);e.onSlideEnd&&e.onSlideEnd({originalEvent:t,value:s}),K(),ce(),pe(),P()}},J=function(t,s){M(),X(),H(t,s)},$=function(t,s){me(),T(),H(t,s)},q=function(t,s){if(!e.disabled){f.current=s;var o=t.key;o==="ArrowRight"||o==="ArrowUp"?B(t,1):(o==="ArrowLeft"||o==="ArrowDown")&&B(t,-1)}},Q=function(t){if(!e.disabled){if(!w.current){U();var s=L(t);e.onSlideEnd&&e.onSlideEnd({originalEvent:t,value:s})}w.current=!1}},U=function(){var t=h.current.getBoundingClientRect();y.current=t.left+fe.getWindowScrollLeft(),D.current=t.top+fe.getWindowScrollTop(),N.current=h.current.offsetWidth,A.current=h.current.offsetHeight},L=function(t){var s,o=t.touches?t.touches[0].pageX:t.pageX,m=t.touches?t.touches[0].pageY:t.pageY;b?s=(o-y.current)*100/N.current:s=(D.current+A.current-m)*100/A.current;var v=(e.max-e.min)*(s/100)+e.min;if(e.step){var S=e.range?p[f.current]:p,O=v-S;O<0?v=S+Math.ceil(v/e.step-S/e.step)*e.step:O>0&&(v=S+Math.floor(v/e.step-S/e.step)*e.step)}else v=Math.floor(v);return V(t,v)},V=function(t,s){var o=parseFloat(s.toFixed(10)),m=o;return e.range?(f.current===0?o<e.min?o=e.min:o>e.max&&(o=e.max):o>e.max?o=e.max:o<e.min&&(o=e.min),m=Be(p),m[f.current]=o,e.onChange&&e.onChange({originalEvent:t,value:m})):(o<e.min?o=e.min:o>e.max&&(o=e.max),m=o,e.onChange&&e.onChange({originalEvent:t,value:m})),m},j=function(t,s,o){var m={transition:g.current?"none":null,left:t!==null&&t+"%",bottom:s&&s+"%"},v=ge("p-slider-handle",{"p-slider-handle-start":o===0,"p-slider-handle-end":o===1,"p-slider-handle-active":f.current===o}),S=ie(Ue({className:v,style:m,tabIndex:e.tabIndex,role:"slider",onMouseDown:function(I){return J(I,o)},onTouchStart:function(I){return $(I,o)},onKeyDown:function(I){return q(I,o)},"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":t||s,"aria-orientation":e.orientation},re),x("handle"));return u.createElement("span",S)},Z=function(){var t=(p[0]<e.min?e.min:p[0]-e.min)*100/(e.max-e.min),s=(p[1]>e.max?e.max:p[1]-e.min)*100/(e.max-e.min),o=b?j(t,null,0):j(null,t,0),m=b?j(s,null,1):j(null,s,1),v=s>t?s-t:t-s,S=s>t?t:s,O=b?{left:S+"%",width:v+"%"}:{bottom:S+"%",height:v+"%"},I=ie({className:"p-slider-range",style:O},x("range"));return u.createElement(u.Fragment,null,u.createElement("span",I),o,m)},ee=function(){var t;p<e.min?t=e.min:p>e.max?t=e.max:t=(p-e.min)*100/(e.max-e.min);var s=b?{width:t+"%"}:{height:t+"%"},o=b?j(t,null,null):j(null,t,null),m=ie({className:"p-slider-range",style:s},x("range"));return u.createElement(u.Fragment,null,u.createElement("span",m),o)};u.useImperativeHandle(n,function(){return{props:e,getElement:function(){return h.current}}});var te=ue.getOtherProps(e),re=De.reduceKeys(te,fe.ARIA_PROPS),ne=ge("p-slider p-component",e.className,{"p-disabled":e.disabled,"p-slider-horizontal":b,"p-slider-vertical":_}),ae=e.range?Z():ee(),se=ie({ref:h,id:e.id,style:e.style,className:ne,onClick:Q},ue.getOtherProps(e),x("root"));return u.createElement("div",se,ae)}));we.displayName="Slider";const Ge=()=>{const{id:r}=Pe(),{io:n}=u.useContext(Ee),a=Ne(),[e,h]=u.useState([[]]),[f,w]=u.useState(""),[g,y]=u.useState(""),[D,N]=u.useState([]),[A,p]=u.useState([]),[b,_]=u.useState(0),[k,C]=u.useState(0),[M,K]=u.useState("");u.useEffect(()=>{var l,c,T,P,E,x,B,H,W,F,J,$,q,Q,U,L,V,j,Z,ee,te,re,ne,ae,se,d,t,s;try{((T=(c=(l=window==null?void 0:window.history)==null?void 0:l.state)==null?void 0:c.usr)==null?void 0:T.event)!==void 0?(h((E=(P=window.history.state)==null?void 0:P.usr)==null?void 0:E.event),p((B=(x=window.history.state)==null?void 0:x.usr)==null?void 0:B.people),w(Y((F=(W=(H=window.history.state)==null?void 0:H.usr)==null?void 0:W.event[0])==null?void 0:F.status)),y(Y((q=($=(J=window.history.state)==null?void 0:J.usr)==null?void 0:$.event[0])==null?void 0:q.status)),y((L=(U=(Q=window.history.state)==null?void 0:Q.usr)==null?void 0:U.event[0])==null?void 0:L.status),_((Z=(j=(V=window.history.state)==null?void 0:V.usr)==null?void 0:j.event[0])==null?void 0:Z.progress),N(JSON.parse((re=(te=(ee=window.history.state)==null?void 0:ee.usr)==null?void 0:te.event[0])==null?void 0:re.assignTo)),C((se=(ae=(ne=window.history.state)==null?void 0:ne.usr)==null?void 0:ae.event[0])==null?void 0:se.priority),K(new Date((s=(t=(d=window.history.state)==null?void 0:d.usr)==null?void 0:t.event[0])==null?void 0:s.deadline))):a("../")}catch{a("../")}},[r]);const Y=l=>{switch(l=Number(l),l){case 0:return"Pending";case 1:return"Stuck";case 2:return"Done";case 3:return"Working on";default:return"Pending"}},R=l=>{switch(l){case"Pending":return 0;case"Stuck":return 1;case"Done":return 2;case"Working on":return 3;default:return 0}},X=l=>{switch(l=Number(l),l){case 0:return{text:"Pending",color:"secondary"};case 1:return{text:"Stuck",color:"danger"};case 2:return{text:"Done",color:"success"};case 3:return{text:"Working on",color:"warning"};default:return{text:"Pending",color:"secondary"}}},ce=l=>{const c=new Intl.ListFormat("en-GB",{style:"narrow",type:"conjunction"});return i.jsxs("div",{children:[i.jsx("p",{style:{margin:0,textTransform:"capitalize"},children:l.name}),i.jsx("small",{className:"p-card-subtitle",style:{margin:0,textTransform:"capitalize"},children:c.format(JSON.parse(l.role))})]})},de=l=>{if(l!==""&&l!==void 0)return Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).format(new Date(l))},G=l=>{let c=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"});const T=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];let P=(l-new Date)/1e3;for(let E=0;E<T.length;E++){const x=T[E];if(Math.abs(P)<x.amount)return c.format(Math.round(P),x.name);P/=x.amount}},me=l=>{var c;l.preventDefault(),n.emit("update-task",{id:(c=e[0])==null?void 0:c.id,assignTo:D,priority:k,status:R(f),deadline:M,progress:b})},pe=l=>{w(l),y(R(l))};return i.jsxs("div",{className:"__s-event",children:[i.jsx("div",{children:i.jsx(ve,{icon:"pi pi-arrow-left",onClick:()=>a("../"),className:"no-shadow p-button-rounded",style:{marginLeft:"-0.8rem",marginBottom:"0.5rem"},text:!0})}),e.map(l=>i.jsx("div",{className:"s-event-cont p-card",children:i.jsxs("div",{className:"p-card-body",style:{padding:"0.5rem 0.5rem"},children:[i.jsx("small",{children:"Task"}),i.jsx("div",{className:"p-card",children:i.jsx("div",{className:"p-card-body",children:l.task})}),i.jsx("small",{children:"Status"}),i.jsxs("div",{className:"flex no-wrap p-card-body",children:[i.jsx(ve,{severity:X(g).color,label:X(g).text,size:"small",className:"no-shadow",style:{flexBasis:"100%"}}),i.jsx(ye,{value:f,onChange:c=>pe(c.value),options:["Pending","Working on","Done","Stuck"]})]}),i.jsx("div",{className:"slider p-card",children:i.jsxs("div",{className:"p-card-body",children:[i.jsx("small",{children:"Progress"}),i.jsx(we,{value:b,onChange:c=>_(c.value)}),i.jsx(Te,{value:b,onChange:c=>_(c.target.value),keyfilter:"pnum"})]})}),i.jsx("small",{children:"Deadline "}),i.jsxs("div",{className:"deadline  p-card",children:[i.jsxs("div",{className:"p-card-body",children:[i.jsx("div",{className:"p-card-heading",children:de(M)}),i.jsx("br",{}),i.jsx(Ie,{value:M,onChange:c=>K(c.value),showButtonBar:!0,showIcon:!0})]}),i.jsx("div",{className:"",style:{padding:"0.2rem 0.5rem",textTransform:"capitalize"},children:G(new Date(M))})]}),i.jsx("small",{children:"Assign To"}),i.jsx("div",{className:"people p-card",children:i.jsx("div",{className:"p-card-body",children:i.jsx(Oe,{id:"role",value:D,onChange:c=>N(c.value),options:A,optionLabel:"name",optionValue:"name",itemTemplate:ce,display:"chip"})})}),i.jsx("small",{children:"Priority"}),i.jsxs("div",{className:"priority flex no-wrap",children:[i.jsx(Ce,{value:k,cancel:!1,onChange:c=>C(c.value)}),i.jsx(ye,{value:k,onChange:c=>C(c.value),options:[{label:"Very Important",value:5},{label:"Very High",value:4},{label:"High",value:3},{label:"Moderate",value:2},{label:"Low",value:1}],optionLabel:"label",optionValue:"value"})]}),i.jsx(ve,{label:"Update",icon:"pi pi-check-circle",severity:"success",className:"w-100",style:{marginTop:".8rem"},onClick:c=>me(c)})]})},Math.random()))]})};export{Ge as default};
