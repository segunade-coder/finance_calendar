import{r as o,M as _,j as e}from"./index-82ae9a98.js";import{B as a,I as F}from"./index.esm-6519f0fc.js";import{D as I,C as p,I as T,a as E}from"./column.esm-8dcd74ef.js";import{D as C}from"./dialog.esm-c994e1f7.js";import{C as M,c as R}from"./confirmdialog.esm-6c8d2608.js";import{D as V}from"./index.esm-3999b91b.js";const L=()=>{const{io:l}=o.useContext(_),[m,i]=o.useState(!1),[y,r]=o.useState(!1),[n,h]=o.useState(""),[c,x]=o.useState(""),[d,f]=o.useState(""),[j,b]=o.useState([]),[u,g]=o.useState(""),[v,N]=o.useState([]),w=e.jsxs("div",{children:[e.jsx(a,{label:"Cancel",icon:"pi pi-times",onClick:()=>i(!1),className:"p-button-text",size:"small"}),e.jsx(a,{label:"Add",icon:"pi pi-check-circle",onClick:()=>O(),autoFocus:!0,size:"small"})]}),D=e.jsxs("div",{children:[e.jsx(a,{label:"Cancel",icon:"pi pi-times",onClick:()=>r(!1),className:"p-button-text",size:"small"}),e.jsx(a,{label:"Add",icon:"pi pi-check-circle",onClick:()=>z(),autoFocus:!0,size:"small"})]});o.useEffect(()=>{l.emit("get-others"),l.emit("get-others-category"),l.on("set-others",({data:s})=>{N(s),l.on("set-others-category",({data:t})=>{(t==null?void 0:t.others_category)!==void 0&&(t==null?void 0:t.others_category)!==""&&(t==null?void 0:t.others_category)!==null&&b(JSON.parse(t==null?void 0:t.others_category))})})},[l]);const k=s=>e.jsx("i",{className:"pi pi-fw pi-trash",style:{color:"red"},onClick:()=>S(s.id)}),A=s=>{l.emit("delete-others",{id:s})},O=()=>{c!==""&&n!==""&&c!==null&&n!==null&&d!==""&&d!==null&&(l.emit("add-others",{desc:c,amount:n,category:d}),i(!1),x(""),h(""),f(""))},S=s=>{R({message:"Do you want to delete?",header:"Delete Confirmation",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",accept:()=>A(s),reject:()=>{}})},z=()=>{u!==""&&u!==null&&(l.emit("add-others-category",{category:[...j,u]}),r(!1),g(""))};return e.jsxs("div",{className:"__others",children:[e.jsx(M,{}),e.jsx("h4",{children:"Others"}),e.jsx(a,{icon:m?"pi pi-minus":"pi pi-plus",className:"p",onClick:()=>i(!m),severity:"secondary",size:"small",text:!0}),e.jsx("div",{className:"c-p-card",style:{marginTop:"2rem"},children:e.jsxs(I,{value:v,sortMode:"multiple",width:"100%",children:[e.jsx(p,{field:"description",header:"Description",sortable:!0}),e.jsx(p,{field:"amount",header:"Amount",sortable:!0}),e.jsx(p,{field:"category",header:"Category",sortable:!0}),e.jsx(p,{field:"id",header:"Action",body:k})]})}),e.jsx(C,{header:"Others",visible:m,onHide:()=>i(!1),style:{width:"30vw"},footer:w,breakpoints:{"960px":"75vw","641px":"100vw"},children:e.jsxs("div",{className:"cashin-card",children:[e.jsxs("span",{className:"p-float-label",children:[e.jsx(T,{id:"amount",value:n,onValueChange:s=>h(s.value)}),e.jsx("label",{htmlFor:"amount",children:"Amount"})]}),e.jsxs("span",{className:"p-float-label",children:[e.jsx("div",{className:"flex",style:{justifyContent:"flex-end"},children:e.jsx(a,{icon:"pi pi-plus",text:!0,className:"p-button-rounded no-shadow",severity:"secondary",onClick:()=>r(!0)})}),e.jsx(V,{id:"categ",options:j,value:d,onChange:s=>f(s.value)})]}),e.jsxs("span",{className:"p-float-label",children:[e.jsx(E,{id:"desc",autoResize:!0,rows:5,cols:10,value:c,onChange:s=>x(s.target.value)}),e.jsx("label",{htmlFor:"desc",children:"Description"})]})]})}),e.jsx(C,{header:"Add Category",visible:y,onHide:()=>r(!1),style:{width:"30vw"},footer:D,breakpoints:{"960px":"75vw","641px":"100vw"},children:e.jsx("div",{className:"cashin-card",children:e.jsxs("span",{className:"p-float-label",style:{marginTop:"0.5rem"},children:[e.jsx(F,{id:"addCateg",value:u,onChange:s=>g(s.target.value)}),e.jsx("label",{htmlFor:"amount",children:"Category Name"})]})})})]})};export{L as default};
