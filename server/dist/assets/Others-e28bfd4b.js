import{r as o,M as I,j as e,B as a,I as _}from"./index-9b3e82f7.js";import{D as F,C as p}from"./column.esm-15f5861a.js";import{D as C,I as T}from"./inputnumber.esm-a336fc43.js";import{D as E,I as M}from"./inputtextarea.esm-fe1d180e.js";import{C as R,c as V}from"./confirmdialog.esm-0e1fe004.js";const K=()=>{const{io:l}=o.useContext(I),[m,i]=o.useState(!1),[y,r]=o.useState(!1),[n,h]=o.useState(""),[c,x]=o.useState(""),[d,f]=o.useState(""),[j,b]=o.useState([]),[u,g]=o.useState(""),[v,N]=o.useState([]),w=e.jsxs("div",{children:[e.jsx(a,{label:"Cancel",icon:"pi pi-times",onClick:()=>i(!1),className:"p-button-text",size:"small"}),e.jsx(a,{label:"Add",icon:"pi pi-check-circle",onClick:()=>S(),autoFocus:!0,size:"small"})]}),D=e.jsxs("div",{children:[e.jsx(a,{label:"Cancel",icon:"pi pi-times",onClick:()=>r(!1),className:"p-button-text",size:"small"}),e.jsx(a,{label:"Add",icon:"pi pi-check-circle",onClick:()=>z(),autoFocus:!0,size:"small"})]});o.useEffect(()=>{l.emit("get-others"),l.emit("get-others-category"),l.on("set-others",({data:s})=>{N(s),l.on("set-others-category",({data:t})=>{(t==null?void 0:t.others_category)!==void 0&&(t==null?void 0:t.others_category)!==""&&(t==null?void 0:t.others_category)!==null&&b(JSON.parse(t==null?void 0:t.others_category))})})},[l]);const k=s=>e.jsx("i",{className:"pi pi-fw pi-trash",style:{color:"red"},onClick:()=>O(s.id)}),A=s=>{l.emit("delete-others",{id:s})},S=()=>{c!==""&&n!==""&&c!==null&&n!==null&&d!==""&&d!==null&&(l.emit("add-others",{desc:c,amount:n,category:d}),i(!1),x(""),h(""),f(""))},O=s=>{V({message:"Do you want to delete?",header:"Delete Confirmation",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",accept:()=>A(s),reject:()=>{}})},z=()=>{u!==""&&u!==null&&(l.emit("add-others-category",{category:[...j,u]}),r(!1),g(""))};return e.jsxs("div",{className:"__others",children:[e.jsx(R,{}),e.jsx(a,{icon:m?"pi pi-minus":"pi pi-plus",className:"p",onClick:()=>i(!m),severity:"secondary",size:"small",text:!0}),e.jsx("div",{className:"c-p-card",style:{marginTop:"2rem"},children:e.jsxs(F,{value:v,sortMode:"multiple",width:"100%",children:[e.jsx(p,{field:"description",header:"Description",sortable:!0}),e.jsx(p,{field:"amount",header:"Amount",sortable:!0}),e.jsx(p,{field:"category",header:"Category",sortable:!0}),e.jsx(p,{field:"id",header:"Action",body:k})]})}),e.jsx(C,{header:"Others",visible:m,onHide:()=>i(!1),style:{width:"30vw"},footer:w,breakpoints:{"960px":"75vw","641px":"100vw"},children:e.jsxs("div",{className:"cashin-card",children:[e.jsxs("span",{className:"p-float-label",children:[e.jsx(T,{id:"amount",value:n,onValueChange:s=>h(s.value)}),e.jsx("label",{htmlFor:"amount",children:"Amount"})]}),e.jsxs("span",{className:"p-float-label",children:[e.jsx("div",{className:"flex",style:{justifyContent:"flex-end"},children:e.jsx(a,{icon:"pi pi-plus",text:!0,className:"p-button-rounded no-shadow",severity:"secondary",onClick:()=>r(!0)})}),e.jsx(E,{id:"categ",options:j,value:d,onChange:s=>f(s.value)})]}),e.jsxs("span",{className:"p-float-label",children:[e.jsx(M,{id:"desc",autoResize:!0,rows:5,cols:10,value:c,onChange:s=>x(s.target.value)}),e.jsx("label",{htmlFor:"desc",children:"Description"})]})]})}),e.jsx(C,{header:"Add Category",visible:y,onHide:()=>r(!1),style:{width:"30vw"},footer:D,breakpoints:{"960px":"75vw","641px":"100vw"},children:e.jsx("div",{className:"cashin-card",children:e.jsxs("span",{className:"p-float-label",style:{marginTop:"0.5rem"},children:[e.jsx(_,{id:"addCateg",value:u,onChange:s=>g(s.target.value)}),e.jsx("label",{htmlFor:"amount",children:"Category Name"})]})})})]})};export{K as default};
